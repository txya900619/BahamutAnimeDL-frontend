<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <link rel="icon" href="<%= BASE_URL %>favicon.ico" />
    <title><%= htmlWebpackPlugin.options.title %></title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css"
    />
  </head>
  <body
    style="-webkit-user-select: none; -webkit-touch-callout: none; -moz-user-select: none; -ms-user-select: none; user-select: none;"
  >
    <noscript>
      <strong
        >We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work
        properly without JavaScript enabled. Please enable it to
        continue.</strong
      >
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
  <script>
    if (document.addEventListener) {
      document.addEventListener(
        "contextmenu",
        function(e) {
          //alert("You've tried to open context menu"); //here you draw your own menu
          e.preventDefault();
        },
        false
      );
    } else {
      document.attachEvent("oncontextmenu", function() {
        alert("You've tried to open context menu");
        window.event.returnValue = false;
      });
    }
    const ctrlOrCmdCodes = new Set([
      "KeyD",
      "KeyE",
      "KeyD",
      "KeyG",
      "KeyN",
      "KeyO",
      "KeyP",
      "KeyQ",
      "KeyR",
      "KeyS",
      "KeyT",
      "KeyW",
      "KeyY",
      "Tab",
      "PageUp",
      "PageDown",
      "F4"
    ]);
    const cmdCodes = new Set(["BracketLeft", "BracketRight", "Comma"]);
    const cmdOptionCodes = new Set(["ArrowLeft", "ArrowRight", "KeyB"]);
    const ctrlShiftCodes = new Set(["KeyQ", "KeyW"]);
    const altCodes = new Set(["Home", "ArrowLeft", "ArrowRight", "F4"]);

    function preventDefaultShortcuts(event) {
      let prevent = false;
      if (navigator.userAgent.match(/Mac OS X/)) {
        if (event.metaKey) {
          if (event.keyCode > 48 && event.keyCode <= 57)
            // 1-9
            prevent = true;
          if (ctrlOrCmdCodes.has(event.code) || cmdCodes.has(event.code))
            prevent = true;
          if (event.shiftKey && cmdOptionCodes.has(event.code)) prevent = true;
          if (event.code === "ArrowLeft" || event.code === "ArrowRight") {
            if (
              !event.contentEditable &&
              event.target.nodeName !== "INPUT" &&
              event.target.nodeName !== "TEXTAREA"
            )
              prevent = true;
          }
        }
      } else {
        if (event.code === "F4") prevent = true;
        if (event.ctrlKey) {
          if (event.keyCode > 48 && event.keyCode <= 57)
            // 1-9
            prevent = true;
          if (ctrlOrCmdCodes.has(event.code)) prevent = true;
          if (event.shiftKey && ctrlShiftCodes.has(event.code)) prevent = true;
        }
        if (event.altKey && altCodes.has(event.code)) prevent = true;
      }

      if (prevent) event.preventDefault();
    }

    document.addEventListener("keydown", preventDefaultShortcuts, false);
    document.addEventListener("keydown", event => {
      if (
        (event.key === "q" || event.key === "Q") &&
        (event.metaKey || event.ctrlKey)
      ) {
        hostWindow.closeBrowser();
        event.preventDefault();
      }
    });
    document.onkeydown = function(e) {
      if (e.keyCode === 116 || e.keyCode === 123) {
        return false;
      }
      if (
        e.ctrlKey &&
        (e.keyCode === 83 ||
          e.keyCode === 85 ||
          e.keyCode === 70 ||
          e.keyCode === 72 ||
          e.keyCode === 74)
      ) {
        return false;
      }
      if (
        e.ctrlKey &&
        (e.keyCode === 107 ||
          e.keyCode === 109 ||
          e.keyCode === 67 ||
          e.keyCode === 173 ||
          e.keyCode === 187 ||
          e.keyCode === 189)
      ) {
        e.preventDefault();
        e.stopPropagation();
      }
    };
    window.addEventListener(
      "mousewheel",
      function(e) {
        if (e.ctrlKey) {
          e.preventDefault();
        }
      },
      { passive: false }
    );
  </script>
</html>
